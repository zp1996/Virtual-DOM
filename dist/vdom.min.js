var vdom=function(){"use strict";function e(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}var n=/\[object\s|\]/g,t={},r=function(e){var n="";for(var t in e)n+=t+": "+e[t]+";"};t.type=function(e){return Object.prototype.toString.call(e).replace(n,"")},t.each=function(e,n){for(var t=0,r=e.length;t<r;t++)n(e[t],t)},t.each(["String","Array","Object"],function(e){t["is"+e]=function(n){return t.type(n)===e}}),t.setAttr=function(e,n,t){switch(n){case"style":e.style.cssText=r(t);break;case"value":"textarea"===e.tagName?e.innerText=t:e.setAttribute(n,t);break;default:e.setAttribute(n,t)}};var i=t,o=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),a=i.isArray,c=i.setAttr,u=i.each,s=function(){function n(t,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];e(this,n),a(r)&&(i=r,r={}),this.tagName=t,this.props=r||{},this.children=i;var o=0;u(i,function(e,t){e instanceof n?o+=e.count:i[t]=e+"",o++}),this.count=o}return o(n,[{key:"render",value:function(){var e=document.createElement(this.tagName);for(var t in this.props)c(e,t,this.props[t]);for(var r,i=0;r=this.children[i++];){var o=r instanceof n?r.render():document.createTextNode(r);e.appendChild(o)}return e}}]),n}(),f=function(e,n){if(e&&n)return"string"==typeof n?e[n]:n(e)},l=function(e,n){for(var t,r={},i=[],o=0;t=e[o++];){var a=f(t,n);a?r[a]=o-1:i.push(t)}return{keyIndex:r,free:i}},p=function(e){return{index:e,type:0}},h=function(e,n){return{index:e,item:n,type:1}},v=function(e,n,t){for(var r,i=l(e,t),o=l(n,t),a=o.free,c=i.keyIndex,u=o.keyIndex,s=[],v=[],d=0,y=void 0,m=void 0,g=0;r=e[g++];)if(y=f(r,t))u.hasOwnProperty(y)?v.push(n[u[y]]):v.push(null);else{var b=a[d++]||null;v.push(b)}for(var x=v.slice(0),N=0;N<x.length;)null===x[N]?(s.push(p(N)),x.splice(N,1)):N++;for(var k=0,A=n.length,w=0;w<A;w++){m=n[w],y=f(m,t);var O=x[k],T=f(O,t);O?y===T?k++:c.hasOwnProperty(T)&&f(x[k+1],t)===y?(s.push(p(w)),x.splice(k++,1)):s.push(h(w,m)):s.push(h(w,m))}for(var j=0;j++<=x.length-1-k;)s.push(p(A));return{moves:s,children:v}},d=i.each,y=i.isString,m=i.isObject,g=i.setAttr,b=[function(e,n){var t=n.node,r=y(t)?document.createTextNode(t):e.render();e.parentNode.replaceChild(r,t)},function(e,n){var t=n.props;for(var r in t)null==t[r]?e.removeAttribute(r):g(e,r,t[r])},function(e,n){var t=n.moves,r=Array.prototype.slice.call(e.childNodes),i={};d(r,function(e){if(1===e.nodeType){var n=e.getAttribute("key");n&&(i[n]=e)}}),d(t,function(n){var t=n.index,o=n.type,a=n.item;if(0===o)e.removeChild(e.childNodes[t]),r.splice(t,1);else{var c=a.key,u=i[c]?i[c]:m(a)?a.render():document.createTextNode(a);r.splice(t,0,u),e.insertBefore(u,e.childNodes[t])}}),i=null},function(e,n){e.nodeValue=n.content}],x=function(e,n){d(n,function(n){b[n.type](e,n)})},N=function e(n,t,r){for(var i,o=r[t.index],a=n.childNodes||[],c=0;i=a[c++];)t.index++,e(i,t,r);o&&x(n,o)},k=i.isString,A=i.each,w=function(e,n){var t={},r=0,i=void 0,o=void 0,a=e.props,c=n.props;for(i in a)o=a[i],c[i]!==o&&(r++,t[i]=c[i]);for(i in c)c.hasOwnProperty(i)&&!a.hasOwnProperty(i)&&(r++,t[i]=c[i]);return 0===r?null:t},O=function(e,n,t,r,i){var o=v(e,n,"key");if(n=o.children,o.moves.length){var a={type:2,moves:o.moves};i.push(a)}var c=null,u=t;A(e,function(e,t){u+=c&&c.count?c.count+1:1,T(e,n[t],u,r),c=e})},T=function(e,n,t,r){var i=[];if(null==n);else if(k(e)&&k(n))e!==n&&i.push({type:3,content:n});else if(e.tagName===n.tagName&&e.key===n.key){var o=w(e,n);o&&i.push({type:1,props:o}),O(e.children,n.children,t,r,i)}else i.push({type:0,node:n});i.length&&(r[t]=i)};return{Element:s,diff:function(e,n){var t={};return T(e,n,0,t),t},patch:function(e,n){N(e,{index:0},n)}}}();
